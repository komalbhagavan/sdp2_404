{% extends 'main/base.html' %}
{% load static %}
{% block main_head %}
{% load crispy_forms_tags %}
<title>{{request.user.first_name}} Cart</title>
<style type="text/css">
    h3 {
        color: #000;
        font-size: 26px;
        font-weight: 300;
        text-align: center;
        text-transform: uppercase;
        position: relative;
    }

    h3 b {
        color: #be2714;
    }

    h3::after {
        content: "";
        width: 100px;
        position: absolute;
        margin: 0 auto;
        height: 4px;
        border-radius: 1px;
        background: #be2714;
        left: 0;
        right: 0;
        bottom: -5px;
    }
</style>
{% endblock main_head %}
{% block main_body %}
<div class="container">
    <h3><b>Checkout</b></h3>
    <div class="col my-4">
        <div class="my-4">
            <ul class="list-group">
                {% for cprod, prod in allProds %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div><img src="{{prod.image1.url}}" style="height: 25px; width: 25px;"
                            class="image-responsive mr-3">{{prod.product_name}}</div>
                    <span class="badge badge-primary badge-pill">{{cprod.number}}</span>
                </li>
                {% endfor %}
            </ul>
        </div>
        <b style="float: right;">Total Payable <i class="fa fa-inr" aria-hidden="true"></i>{{total}} </b>.
    </div>
    <hr>
    <div class="col my-4">
        <h4 style="text-align: center;">Enter Address & Other Details:</h4>
        <form method="post" action="#">{% csrf_token %}
            <div class="form-row">
                <div class="form-group col-md-3">
                    {{u_form.first_name|as_crispy_field}}
                </div>
                <div class="form-group col-md-3">
                    {{u_form.last_name|as_crispy_field}}
                </div>
                <div class="form-group col-md-3">
                    {{address_form.mobile|as_crispy_field}}
                </div>
                <div class="form-group col-md-3">
                    {{address_form.alternate_mobile|as_crispy_field}}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-9">
                    {{address_form.address|as_crispy_field}}
                </div>
                
                <div class="form-group col-md-3">
                    {{address_form.landmark|as_crispy_field}}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-3">
                    {{address_form.locality|as_crispy_field}}
                </div>
                <div class="form-group col-md-3">
                    {{address_form.city|as_crispy_field}}
                </div>
                <div class="form-group col-md-3">
                    {{address_form.state|as_crispy_field}}
                </div>
                <div class="form-group col-md-3">
                    {{address_form.pincode|as_crispy_field}}
                </div>
            </div>
            <div class="custom-control custom-switch">
              <input type="checkbox" class="custom-control-input" id="customSwitch1" name="pay_mode">
              <label class="custom-control-label" for="customSwitch1">Cash on Delivery</label>
            </div>
            <button type="submit" class="btn btn-danger" style="float: right; background-color: #be2714;">Payment</button>
        </form>
        <br>
    </div>
</div>
<form action="{% url 'success' %}" method="POST">{% csrf_token %}
<script
    
    src="https://checkout.razorpay.com/v1/checkout.js"
    data-key="rzp_test_x0sV319mdrR7n1" // Enter the Test API Key ID generated from Dashboard → Settings → API Keys
    data-amount="{{total}}" // Amount is in currency subunits. Hence, 29935 refers to 29935 paise or ₹299.35.
    data-currency="INR"// You can accept international payments by changing the currency code. Contact our Support Team to enable International for your account
    data-order_id="{{Payment.id}}"// Replace with the order_id generated by you in the backend.
    data-buttontext="Pay with Razorpay"
    data-name="KL MART PAYMENT GATEWAY"
    data-description="KL MART"
    data-image="data:image/png;base64,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"
    data-prefill.name="PC"
    data-prefill.email="gaurav.kumar@example.com"
    data-theme.color="#047BD5"
></script>

{% endblock main_body %}